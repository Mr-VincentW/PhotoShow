/**
 * Copyright (c) 2012-2022 Vincent W., MIT-licensed.
 * @fileOverview PhotoShow popup page style.
 * @author Vincent | vincentwang863@gmail.com
 * @version 1.0.0.0 | 2012-12-07 | Vincent    // Initial version.
 * @version 2.0.0.0 | 2013-01-03 | Vincent    // Updates: Support turnning on/off PhotoShow for individual website.
 * @version 3.0.0.0 | 2018-11-08 | Vincent    // Updates: Reconstruction.
 * @version 3.0.0.1 | 2018-11-16 | Vincent    // Updates: Remove background image of stateToggleBtn.
 * @version 3.1.0.0 | 2018-11-17 | Vincent    // Updates: Replace image resources with font icons.
 * @version 3.2.1.0 | 2018-12-01 | Vincent    // Updates: Transform to LESS.
 * @version 3.4.0.0 | 2019-01-24 | Vincent    // Updates: Add activation mode control.
 * @version 3.8.2.2 | 2019-06-09 | Vincent    // Updates: Disable animation for toggle button during initialization.
 * @version 3.8.4.0 | 2019-06-20 | Vincent    // Updates: Add hover style for activation mode radio buttons.
 * @version 4.0.0.0 | 2019-11-07 | Vincent    // Updates: Add VIEW MODE feature;
 *                                            // Updates: Add shadow for the viewer and allow it to be hidden by user settings;
 *                                            // Updates: Allow PhotoShow logo in the viewer to be hidden by user settings;
 *                                            // Updates: Add new hotkeys 'Esc', 'Home', 'End', 'PageUp', 'PageDown', 'Arrow Left', 'Arrow Right', 'M', 'L', 'A' and 'P';
 *                                            // Updates: Change hotkeys for image rotation;
 *                                            // Updates: Optimize the popup page styles;
 *                                            // Updates: Optimize all the icons.
 * @version 4.0.3.0 | 2019-11-23 | Vincent    // Updates: Add 'share' links.
 * @version 4.0.12.0 | 2020-01-24 | Vincent   // Updates: Add GitHub link.
 * @version 4.1.0.0 | 2020-03-13 | Vincent    // Updates: Add hotkey specification for image address copying.
 * @version 4.2.0.0 | 2020-03-20 | Vincent    // Updates: Support disabling hotkeys;
 *                                            // Updates: Optimize styles.
 * @version 4.6.0.0 | 2021-01-24 | Vincent    // Updates: Support displaying HD image size in the viewer;
 *                                            // Updates: Remove the feature of displaying PhotoShow logo in the viewer.
 * @version 4.7.0.0 | 2021-07-04 | Vincent    // Updates: Add config items for activation exemption, loading status display, transition animation, and context menu items.
 * @version 4.9.0.0 | 2021-08-22 | Vincent    // Updates: Add 'works-everywhere' related styles;
 *                                            // Updates: Optimize whole page styles.
 * @version 4.9.1.0 | 2021-08-23 | Vincent    // Bug Fix: Firefox page scrollbar flickering issue when toggling works-everywhere feature.
 * @version 4.10.0.0 | 2021-09-18 | Vincent   // Updates: Optimize config items styles and icons.
 * @version 4.12.0.0 | 2021-11-07 | Vincent   // Updates: Add 'developer mode' related styles.
 * @version 4.14.0.0 | 2021-12-14 | Vincent   // Updates: Add 'activation delay' related styles.
 * @version 4.15.0.0 | 2022-03-27 | Vincent   // Updates: Support file naming.
 * @version 4.16.0.0 | 2022-04-10 | Vincent   // Updates: Reshape the config items structure.
 * @version 4.20.0.0 | 2023-02-05 | Vincent   // Updates: Allow enabling/disabling image anti-aliasing (GitHub issue #90).
 * @version 4.24.0.0 | 2023-05-21 | Vincent   // Updates: Support whitelist mode (GitHub issue #19, #121).
 */

// Color definitions
@PHOTOSHOW_BLUE: #6cbcef;
@PHOTOSHOW_GREY: #ccc;
@PHOTOSHOW_RED: #db4b37;

// Font icon
@font-face {
  font-family: photoShowIconFont;
  src: url('../resources/photoShowIcons.woff2') format('woff2'), url('../resources/photoShowIcons.woff') format('woff');
}

.icon {
  -webkit-font-smoothing: antialiased;
  font-family: photoShowIconFont;
  font-style: normal;
  font-weight: 400;
  font-size: 16px;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  outline: 0;

  &:before {
    display: inline-block;
  }

  &-logo:before {
    content: '\e900';
    background: #52a3f5;
    color: #fff;
  }

  &-bubble-check:before {
    content: '\e901';
  }

  &-bubble-warn:before {
    content: '\e902';
  }

  &-bubble-error:before {
    content: '\e903';
  }

  &-works-everywhere:before {
    content: '\e904';
  }

  &-activation:before {
    content: '\e905';
  }

  &-activation-exemption:before {
    content: '\e906';
  }

  &-activation-delay:before {
    content: '\e907';
  }

  &-view-mode:before {
    content: '\e908';
  }

  &-viewer-location:before {
    content: '\e909';
  }

  &-image-size-display:before {
    content: '\e90a';
  }

  &-shadow-display:before {
    content: '\e90b';
  }

  &-loading:before {
    content: '\e90c';
  }

  &-animation:before {
    content: '\e90d';
  }

  &-antialiasing:before {
    content: '\e90e';
  }

  &-context-menu:before {
    content: '\e90f';
  }

  &-developer-mode:before {
    content: '\e910';
  }

  &-whitelist-mode:before {
    content: '\e911';
  }

  &-keyboard:before {
    content: '\e912';
  }

  &-file-naming:before {
    content: '\e913';
  }

  &-share:before {
    content: '\e914';
  }

  &-facebook:before {
    content: '\e915';
  }

  &-twitter:before {
    content: '\e916';
  }

  &-weibo:before {
    content: '\e917';
  }

  &-qzone:before {
    content: '\e918';
  }

  &-reddit:before {
    content: '\e919';
  }

  &-tumblr:before {
    content: '\e91a';
  }

  &-mail:before {
    content: '\e91b';
  }

  &-github:before {
    content: '\e91c';
  }
}

// Page style
html,
body,
h1,
h2,
h3,
h4,
p,
em,
i,
dl,
dt,
dd,
ul,
ol,
li,
input {
  margin: 0;
  padding: 0;
  font-style: normal;
  list-style: none;
  outline-color: @PHOTOSHOW_BLUE;
}

html {
  scrollbar-width: none; // Hide scrollbar on the whole page for Firefox which flickers when toggling works-everywhere feature.
}

body {
  -webkit-font-smoothing: antialiased;
  -webkit-text-size-adjust: 100%;
  font-size: 14px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft Yahei', '\5b8b\4f53', sans-serif;
  line-height: 1.5;
  color: #333;
  min-width: 540px;
  max-width: 600px;

  &:lang(zh) {
    min-width: 560px;
  }
}

h1,
h2,
h3 {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI Light', 'Microsoft Yahei Light', '\5b8b\4f53', sans-serif;
  display: inline;
}

input,
textarea {
  &::placeholder {
    color: #999;
    font-style: italic;
  }
}

// Header
.header {
  display: flex;
  align-items: center;
  padding: 20px;

  .icon-logo {
    display: inline-block;
    width: 48px;
    height: 48px;
    font-size: 48px;
    margin-right: 10px;
  }

  #name {
    display: inline-block;
    font-size: 20px;
  }

  #updateDate {
    align-self: flex-start;
    margin-left: auto;
    color: #999;
    font-size: 12px;
    opacity: 1;
    transition: 0.2s 0.1s;
  }
}

// State toggle
.state-toggle {
  display: flex;
  align-items: center;
  background: fade(@PHOTOSHOW_BLUE, 20%);
  transition: 0.2s;
  padding: 5px 20px;
  box-shadow: -25px 0 0 0 fade(@PHOTOSHOW_BLUE, 20%), 25px 0 0 0 fade(@PHOTOSHOW_BLUE, 20%);

  &.disabled {
    background: fade(@PHOTOSHOW_RED, 20%);
    border-bottom-color: @PHOTOSHOW_RED;
    box-shadow: -25px 0 0 0 fade(@PHOTOSHOW_RED, 20%), 25px 0 0 0 fade(@PHOTOSHOW_RED, 20%);

    .state-icon {
      color: @PHOTOSHOW_RED;
    }

    #whitelistModeTag {
      color: @PHOTOSHOW_RED;
    }

    .state-toggle-btn {
      background: @PHOTOSHOW_RED;

      &:after {
        right: 18px;
      }
    }
  }

  &.shut-down {
    background: fade(@PHOTOSHOW_GREY, 20%);
    border-bottom-color: @PHOTOSHOW_GREY;
    box-shadow: -25px 0 0 0 fade(@PHOTOSHOW_GREY, 20%), 25px 0 0 0 fade(@PHOTOSHOW_GREY, 20%);

    .state-icon {
      color: @PHOTOSHOW_GREY;
    }

    #whitelistModeTag {
      color: @PHOTOSHOW_GREY;
    }

    .state-toggle-btn {
      background: @PHOTOSHOW_GREY;
      cursor: not-allowed;

      &:after {
        right: 18px;
      }
    }
  }

  &.no-ani {
    &,
    & *,
    & *:after {
      transition: none !important;
    }
  }

  .state-icon {
    transition: 0.2s;
    display: inline-block;
    color: @PHOTOSHOW_BLUE;
    width: 18px;
    margin-right: 5px;
  }

  #stateMsg {
    line-height: 26px;
    font-size: 14px;
  }

  #whitelistModeTag {
    display: none;
    background: fade(#fff, 75%);
    font-size: 10px;
    line-height: 1;
    padding: 2px 6px;
    border-radius: 8px;
    border: solid 1px;
    color: @PHOTOSHOW_BLUE;
    margin-left: 4px;

    &:after {
      content: '__MSG_whitelistModeToggleHeader__';
    }
  }

  .state-toggle-btn {
    transition: 0.2s;
    position: relative;
    display: block;
    width: 36px;
    height: 20px;
    margin-left: auto;
    cursor: pointer;
    background: @PHOTOSHOW_BLUE;
    border-radius: 2px;
    box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.2);

    &:after {
      content: '';
      transition: 0.2s;
      position: absolute;
      display: block;
      width: 16px;
      height: 16px;
      background: #fff;
      border-radius: 1px;
      right: 2px;
      top: 2px;
      box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }
  }
}

// Settings.
.settings {
  position: relative;
  max-height: 400px;
  overflow: auto;
  margin: 10px 10px 20px 20px;
  scrollbar-width: thin;
  scrollbar-color: #c1c1c1 #f1f1f1;

  &:lang(zh) {
    max-height: 380px;
  }

  &::-webkit-scrollbar {
    width: 2px;
    height: 2px;
  }

  &::-webkit-scrollbar-track {
    background: #f1f1f1;
  }

  &::-webkit-scrollbar-thumb {
    background: #c1c1c1;

    &:hover {
      background: #a8a8a8;
    }

    &:active {
      background: #787878;
    }
  }

  &:before,
  &:after {
    content: '';
    position: sticky;
    display: block;
    left: 0;
    right: 0;
    height: 10px;
  }

  &:before {
    top: 0;
    background: linear-gradient(0deg, transparent, #fff);
    margin-bottom: -5px;
  }

  &:after {
    bottom: 0;
    background: linear-gradient(0deg, #fff, transparent);
    margin-top: -5px;
  }
}

// Description
dl.desc {
  &:not(:last-child) {
    margin-bottom: 15px;
  }

  dt {
    display: flex;
    align-items: center;
    color: @PHOTOSHOW_BLUE;

    .icon {
      width: 18px;
      margin-right: 5px;
      display: inline-block;
    }

    h3 {
      font-size: 16px;
    }
  }

  dd {
    color: #666;
    padding: 0 24px;

    &.radios,
    &.checkboxes {
      label {
        display: inline-flex;
        align-items: baseline;

        &:not(:first-of-type) {
          margin-left: 20px;
        }

        &:lang(zh) {
          align-items: center;
        }

        input {
          + span {
            padding-left: 4px;
          }

          &:not(:disabled) {
            &,
            & + span {
              transition: color 0.4s;
              cursor: pointer;

              &:hover {
                transition: color 0.1s;
                color: @PHOTOSHOW_BLUE;
              }
            }
          }

          &:disabled + span {
            cursor: not-allowed;
            color: #999;
          }
        }
      }
    }

    [placeholder]:empty:after {
      content: attr(placeholder);
      font-style: italic;
      color: #999;
    }
  }

  input:disabled {
    cursor: not-allowed;
  }

  input[type='number'] {
    padding: 2px;
    margin: 0 0.25em;
    width: 32px;
    text-align: center;
    -moz-appearance: textfield;
  }

  input[type='number']::-webkit-inner-spin-button,
  input[type='number']::-webkit-outer-spin-button {
    -webkit-appearance: none;
  }

  input[type='text'] {
    padding: 2px;
  }

  .grid {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 8px;
    margin-top: 8px;

    & > * {
      display: contents;
    }

    h4 {
      display: inline;
    }
  }

  &.activation-mode {
    dd.radios {
      #activationModeDesc + span {
        padding: 0 30px;
      }
    }
  }

  &.hotkeys-spec {
    dd table {
      border-collapse: collapse;
      border-spacing: 0;
      width: 100%;
      line-height: 2;

      tr {
        transition: background 0.4s;
        border-bottom: dashed 1px #ddd;

        &:hover {
          transition: background 0.1s;
          background: fade(@PHOTOSHOW_BLUE, 20%);
        }

        td {
          padding: 0 0.75em;
          cursor: pointer;

          &:first-child {
            padding-left: 0;
            line-height: 0;
          }

          &:nth-child(2) {
            text-align: right;
            font-weight: bold;
          }
        }
      }
    }
  }

  &.file-naming {
    dd:last-child {
      margin-top: 16px;
    }

    .file-naming-example {
      word-break: break-all;
    }

    .file-naming-patterns {
      display: grid;
      grid-template-columns: repeat(3, auto 1fr);
      color: #999;

      li:nth-child(odd) {
        font-weight: bold;
        margin-right: 4px;
        user-select: all;
      }

      li.long-pattern {
        grid-column: 2 / span 5;
      }
    }
  }

  &.share {
    display: flex;
    align-items: center;

    dd {
      display: flex;
      align-items: center;
      font-size: 0;
      padding: 0 0 0 6px;

      a {
        transition: 0.2s;
        display: inline-block;
        padding: 2px;
        margin-left: 8px;
        font-size: 16px;

        &:hover {
          transition: 0.1s;
          transform: scale(1.25);
        }
      }

      i {
        display: inline-block;
        height: 14px;
        border-right: dashed 1px #ddd;
        margin-left: 12px;
      }

      .icon-mail {
        color: @PHOTOSHOW_BLUE;
      }

      .icon-github {
        color: #24292e;
      }

      .icon-facebook {
        color: #4267b2;
      }

      .icon-twitter {
        color: #1da1f2;
      }

      .icon-weibo {
        color: #e6162d;
      }

      .icon-qzone {
        color: #ffcf00;
      }

      .icon-reddit {
        color: #ff4500;
      }

      .icon-tumblr {
        color: #001935;
      }
    }
  }
}
